\input{preamble.tex}

\newcommand\sectio[1]{%
  \section*{#1}%
  \addcontentsline{toc}{section}{#1}}

\renewcommand\contentsname{Sommaire}

\renewcommand{\thesection}{\arabic{section}}
%\renewcommand{\thesubsection}{\arabic{section}}
\newcommand\familyname{\textsc}
\addto\captionsfrench{\renewcommand{\figurename}{Image}}

\newtoggle{annexes}
\toggletrue{annexes}

\input{first_page.tex}

\title{\textbf{Rapport de stage}}
\author{Marion \familyname{Ly} \\ Thibaut \familyname{Smith}}
\date{2013 - 2014}

\begin{document}
	\section{configuration des acteurs}
	
	Chaque acteur possède une même configuration :
	
	\begin{tabular}{|c|c|c|c|}
	\hline 
	Configuration/ Acteur & convoyeur & aiguilleurs & rfid  \\ 
	\hline 
	module & actorconveyor & actorrailway & actorrfid \\
	\hline 
	id & random & random & random \\
	\hline 
	opt & entrée/sortie & entrée/sortie/regle de propriorité & •  \\ 
	\hline 
	state & on/off & {[in],[out]} (son état physique) & • \\
	\hline 
	worktime & ? & ? & 0\\ 
	\hline 
	listdata & produit transféré & {produit tranféré, état aiguilleur} & produit détecté  \\ 
	\hline 
	\end{tabular} 
	
	
	\begin{tabular}{|c|c|c|}
	\hline
	Configuration/ Acteur & workstation & produits \\
	\hline
	module & actorworkstation & actorproduct \\ 
	\hline
	id & random & random \\ 
	\hline
	opt & entrée/sortie & •\\
	\hline
	state & on/off/default & etat pysique (raw,Q1,Q2,Q3) \\ 
	\hline
	worktime & ? & ?  \\
	\hline
	list\_data & {produit tranformé, qualité} & emplacement traversé\\
	\hline
	\end{tabular}
	
	\section{Interface : actor_contract}

	 une fonction create qui permet de créer l'acteur avec un id aléatoire pour l'instant et des configurations par défaut différentes pour chaque acteur
	
	 une fonction answer qui prend 2 arguments, le protocole utilisé dans les différents acteurs est 
	\begin{itemize}
	
	 \item pour l'appel à la fonction les arguments : {Config,{actor\_product, Config\_prod, type de 				question}}
	\item pour la réponse : {Config,{actor\_product, NewConfig\_prod, info}, destination}

	\end{itemize}
	 Le produit étant le seul acteur qui est un flux physique, il ne répond pas au protocole. 
	 
	 L'interface comprend également différentes fonctions implémentées pour accéder, modifier les données des configurations ainsi que des réponses types utilisées par chaque acteur
	 
	 \section{Lecteur RFID}
	 Lorsque le lecteur reçoit un produit, nous avons alors un temps de travail, puis le lecteur enregistre alors les données du produit dans sa base et ses données à lui dans la base du produit. Le lecteur envoie alors l'Id du produit qu'il a lu en réponse
	 
	 \section{Convoyeur}
	Lorsqu'un produit arrive au convoyeur, un temps de travail se passe, le temps de transport du produit. Les données du produit sont enregistrées dans la base du convoyeur, celles du convoyeur dans la base du produit.Le produit est alors envoyé à l'acteur suivant.

	\section{Aiguilleur}
	A partir du moment, où l'aiguilleur reçoit le produit, sa réponse dépendra des entrées sorties de celui-ci : 
	- plusieurs entrées ou plusieurs sorties, un message est envoyé au superviseur, contenant la description du conflit et les données du produit et de l'aiguilleur pour que le superviseur puisse prendre sa décision ( un ordre de priorité contenu dans les options de l'aiguilleur, et la qualité demandé du produit peut l'aider)
	- une entrée et une sortie, on ajoute le produit ainsi que l'état de l'aiguilleur à la base de l'aiguilleur et on envoie le produit à l'acteur suivent
	
	S'il y a eu conflit, l'aiguilleur recevra alors la décision du superviseur sur l'aiguillage du produit. On pourra ajouter les informations de la même façon qu'avec une entrée et une sortie. L'aiguilleur changera d'état (entrée/sortie) et il y aura alors un temps de travail. l'aiguilleur enverra alors ensuite le produit au destinataire choisi par l'aiguilleur. Si la décision choisi est identique qu'à l'état actuelle de l'aiguilleur celui-ci n'a donc pas à changer d'état et il n'y a donc pas de temps de travail.
	
	
	 
	 \section{Le produit}
	 
	 Comme dit précédemment, le produit est un flux physique donc il ne répond pas à un protocole pour ce qui est de ses réponses au superviseur. 
	 
\end{document}